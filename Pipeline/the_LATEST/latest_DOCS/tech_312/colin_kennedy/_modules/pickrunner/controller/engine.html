




<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pickrunner.controller.engine &mdash; Portal: Origins [Part 2] 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
  

  
    <link rel="top" title="Portal: Origins [Part 2] 1.0.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Portal: Origins [Part 2]
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../wip/index.html">Portal Origins Part 2</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../pickrunner/pickrunner.html">Pickrunner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../abs2rel/abs2rel.html">Batch Absolute Files to Relative Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hdrprocess/hdrprocess.html">HDRi Batch Processor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Portal: Origins [Part 2]</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
    <li>pickrunner.controller.engine</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pickrunner.controller.engine</h1><div class="highlight"><pre>
<span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Description</span>
<span class="sd">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="sd">The internal methods that are actually run to initialize the environment for</span>
<span class="sd">pickrunner are determined here. This module is meant for strictly node-based</span>
<span class="sd">operations. Information about the nodes have been placed in the</span>
<span class="sd">:doc:`membership` module</span>

<span class="sd">Filename</span>
<span class="sd">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="sd">engine.py</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># IMPORT STANDARD LIBRARIES</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="c1"># IMPORT THIRD-PARTY LIBRARIES</span>
<span class="kn">import</span> <span class="nn">pymel.core</span> <span class="kn">as</span> <span class="nn">pm</span>
<span class="kn">import</span> <span class="nn">maya.mel</span> <span class="kn">as</span> <span class="nn">mel</span>
<span class="kn">import</span> <span class="nn">pickrunner.model.six.six</span> <span class="kn">as</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">pickrunner.model.header</span> <span class="kn">as</span> <span class="nn">header</span>

<span class="c1"># IMPORT LOCAL LIBRARIES</span>
<span class="kn">import</span> <span class="nn">pickrunner.model.membership</span> <span class="kn">as</span> <span class="nn">membership</span>
<span class="kn">import</span> <span class="nn">application</span> <span class="kn">as</span> <span class="nn">app</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__author__</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__author__</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__license__</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__version__</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__email__</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">__status__</span>


<div class="viewcode-block" id="PickNodeGeneric"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.PickNodeGeneric">[docs]</a><span class="k">class</span> <span class="nc">PickNodeGeneric</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is used to give metadata objects upper-level functions and, to</span>
<span class="sd">    an extent, some data exchange between other classes of similar type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The init statement creates a metadata node or acquires an existing one</span>
<span class="sd">        based on the name argument. This node is assigned as self.metadataNode</span>
<span class="sd">        within the current class instance, which is used in a number of</span>
<span class="sd">        operations within the class.</span>

<span class="sd">        Args:</span>
<span class="sd">            node (&lt;pm.nodetypes.PyNode&gt;): The node to get pickrunner</span>
<span class="sd">                                          information from</span>
<span class="sd">            name (str): The name of the node that will be referenced</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PickNodeGeneric</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># do nothing</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadataNode</span> <span class="o">=</span> <span class="n">membership</span><span class="o">.</span><span class="n">MetadataObjectMaya</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowedDirections</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">allowedDirections</span>
        <span class="n">scriptPrefix</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">scriptPrefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrDefault</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataNode</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">scriptPrefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="p">()</span>
    <span class="c1"># end __init__</span>

<div class="viewcode-block" id="PickNodeGeneric.get_attr"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.PickNodeGeneric.get_attr">[docs]</a>    <span class="k">def</span> <span class="nf">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputH</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic get attr statement. It gets a specified direction from the</span>
<span class="sd">        self.metadataNode node name, casts it into a PickNodeGeneric object</span>
<span class="sd">        and returns it</span>

<span class="sd">        Args:</span>
<span class="sd">            inputH (str): Gets an attribute if it is valid within the context</span>
<span class="sd">                          of the current class</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: Gets back a wrapped class object, using a string</span>
<span class="sd">                               which represents the connected metadata&#39;s name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inputH</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nodeAttributesAll</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input: {} not valid&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inputH</span><span class="p">))</span>

        <span class="n">retrievedNode</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">retrievedNode</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrDefault</span> <span class="o">+</span> <span class="n">inputH</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaAttributeError</span><span class="p">:</span>
            <span class="c1"># Attempt to create the missing attribute (assuming that it exists</span>
            <span class="c1"># in self.app.nodeAttributesAll)</span>
            <span class="c1">#</span>
            <span class="n">allowedDirectionsDict</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">allowedDirectionsDict</span>
            <span class="n">attributeAddFunc</span> <span class="o">=</span> <span class="n">allowedDirectionsDict</span><span class="p">[</span><span class="n">inputH</span><span class="p">][</span><span class="s2">&quot;createFunction&quot;</span><span class="p">]</span>
            <span class="n">attributeAddFunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataNode</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">if</span> <span class="n">retrievedNode</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">retrievedNode</span><span class="p">)</span></div>
    <span class="c1"># end get_attr</span>

<div class="viewcode-block" id="PickNodeGeneric.set_attr"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.PickNodeGeneric.set_attr">[docs]</a>    <span class="k">def</span> <span class="nf">set_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputH</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic set attr statement. Uses the self.metadataNode to set its</span>
<span class="sd">        attributes and automatically unlock/set/connect/lock the given</span>
<span class="sd">        direction&#39;s attributes</span>

<span class="sd">        Args:</span>
<span class="sd">            inputH (str): The specified user direction. Must fit within</span>
<span class="sd">                          self.allowedDirections</span>
<span class="sd">            value (&lt;MotorMaya&gt; or str): The name of the metadata node the</span>
<span class="sd">                                        MotorMaya instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inputH</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nodeAttributesAll</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input: {} not valid&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inputH</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadataNode</span><span class="o">.</span><span class="n">safe_set_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrDefault</span> <span class="o">+</span> <span class="n">inputH</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">return</span>  <span class="c1"># exit script early</span>

        <span class="c1"># if the input isn&#39;t a string, assume it&#39;s valid metadata class</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">member</span> <span class="o">=</span> <span class="n">membership</span><span class="o">.</span><span class="n">MembershipMaya</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">member</span><span class="o">.</span><span class="n">is_valid_loaded_object</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaNodeError</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaNodeError</span><span class="p">:</span>
            <span class="n">membership</span><span class="o">.</span><span class="n">MetadataObjectMaya</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">metadataNodeType</span><span class="p">,</span>
                                          <span class="n">value</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadataNode</span><span class="o">.</span><span class="n">safe_set_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrDefault</span> <span class="o">+</span> <span class="n">inputH</span><span class="p">,</span>
                                        <span class="n">value</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">+</span> <span class="s2">&quot;.message&quot;</span><span class="p">)</span></div>
    <span class="c1"># end set_attr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">master</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the master node of the current metadata node. If the returning</span>
<span class="sd">        value is None, init the master node and connect it (default behavior)</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The class representing the metadata connection,</span>
<span class="sd">                               which is retrieved by parsing the attribute-str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_master</span>
    <span class="c1"># end master.property</span>

    <span class="nd">@master.setter</span>
    <span class="k">def</span> <span class="nf">master</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets master node to the given node name, if it exists.</span>

<span class="sd">        .. note::</span>
<span class="sd">            Using this setter method will override the default behavior of</span>
<span class="sd">            master, which just to uses the name provided by the master metadata</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The object name which will be</span>
<span class="sd">                         the current node&#39;s master reference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># end master.setter</span>
    <span class="c1"># end master</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the up direction of the given node</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The class representing the metadata connection,</span>
<span class="sd">                               which is retrieved by parsing the attribute-str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_up</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="s2">&quot;up&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_up</span>
    <span class="c1"># end up.property</span>

    <span class="nd">@up.setter</span>
    <span class="k">def</span> <span class="nf">up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the up direction of the given node</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The object to set as the current node&#39;s up direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="s2">&quot;up&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_up</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># end up.setter</span>
    <span class="c1"># end up</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the left direction of the given node</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The class representing the metadata connection,</span>
<span class="sd">                               which is retrieved by parsing the attribute-str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>
    <span class="c1"># end left.property</span>

    <span class="nd">@left.setter</span>
    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the left direction of the given node</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The object to set as the current node&#39;s left direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># end left.setter</span>
    <span class="c1"># end left</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the down direction of the given node</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The class representing the metadata connection,</span>
<span class="sd">                               which is retrieved by parsing the attribute-str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_down</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="s2">&quot;down&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_down</span>
    <span class="c1"># end down.property</span>

    <span class="nd">@down.setter</span>
    <span class="k">def</span> <span class="nf">down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the down direction of the given node</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The object to set as the current node&#39;s down direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="s2">&quot;down&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_down</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># end down.setter</span>
    <span class="c1"># end down</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the right direction of the given node</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The class representing the metadata connection,</span>
<span class="sd">                               which is retrieved by parsing the attribute-str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span>
    <span class="c1"># end right.property</span>

    <span class="nd">@right.setter</span>
    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the right direction of the given node</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The object to set as the current node&#39;s right direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">value</span></div>
    <span class="c1"># end right.setter</span>
    <span class="c1"># end right</span>
<span class="c1"># end PickNodeGeneric</span>


<div class="viewcode-block" id="MotorMaya"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya">[docs]</a><span class="k">class</span> <span class="nc">MotorMaya</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The primary purpose of this node is to provide standard Maya objects a way</span>
<span class="sd">    to connect into and interface with pickrunner&#39;s nodetypes. While it is a</span>
<span class="sd">    wrapper for PickNodeGeneric, this class provides additional methods to</span>
<span class="sd">    help accessing nodes simpler, as well as provide information about the</span>
<span class="sd">    default implementation of the class like its nodetype, name, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">metadataAttrName</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">metadataAttrName</span>
    <span class="n">metadataNodeType</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">metadataNodeType</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            node (&lt;pymel.core.nodetypes.PyNode&gt; or str): A string to a Maya</span>
<span class="sd">                                                         object name or PyNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MotorMaya</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="p">,</span> <span class="n">pm</span><span class="o">.</span><span class="n">nodetypes</span><span class="o">.</span><span class="n">Mesh</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="o">.</span><span class="n">getParent</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">objAttr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataAttrName</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">allowedDirections</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="o">.</span><span class="n">allowedDirections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">=</span> <span class="s2">&quot;{}_{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataAttrName</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">get_unique_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataNodeType</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span><span class="p">]</span>
    <span class="c1"># end __init__</span>

<div class="viewcode-block" id="MotorMaya.init_metadata_proxy"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.init_metadata_proxy">[docs]</a>    <span class="k">def</span> <span class="nf">init_metadata_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A wrapper statement which handles the application-specific way in</span>
<span class="sd">        which metadata/picknodes are instantiated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">initialSelection</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="p">()</span><span class="o">.</span><span class="n">get_selection</span><span class="p">()</span>

        <span class="c1"># init a master metadata node</span>
        <span class="n">metaMaster</span> <span class="o">=</span> <span class="n">membership</span><span class="o">.</span><span class="n">MasterMetadataObjectMaya</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataNodeType</span><span class="p">)</span>

        <span class="c1"># init the actual node in question and connect it to the master node</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pm</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objAttr</span><span class="p">)</span>  <span class="c1"># test if a metadata node exists</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickNode</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaAttributeError</span><span class="p">:</span>
            <span class="n">pm</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span><span class="p">,</span> <span class="n">ln</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataAttrName</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">)</span>
            <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objAttr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
            <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objAttr</span><span class="p">,</span> <span class="n">lock</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickNode</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pickNode</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">metaMaster</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span>

        <span class="c1"># restore the original selection prior to running this method</span>
        <span class="n">pm</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">initialSelection</span><span class="p">)</span></div>
    <span class="c1"># end init_metadata_proxy</span>

<div class="viewcode-block" id="MotorMaya.has_metadata"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.has_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">has_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeType</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks a specified object with a specific nodeType for existence. If</span>
<span class="sd">        the node fails to be called, then the function returns False.</span>
<span class="sd">        If nodeType and name are both set to their default values (NoneType),</span>
<span class="sd">        then the current class&#39;s self.pickNodeInfo is used instead</span>

<span class="sd">        Args:</span>
<span class="sd">            nodeType (str): The name of the class to use for checking</span>
<span class="sd">            name (str): The name of the metadata object to check</span>
<span class="sd">        Returns:</span>
<span class="sd">            bool: True/False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">nodeType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">nodeType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataNodeType</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaNodeError</span>
        <span class="k">except</span> <span class="n">pm</span><span class="o">.</span><span class="n">MayaNodeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="k">return</span> <span class="bp">True</span></div>
    <span class="c1"># end has_metadata</span>

<div class="viewcode-block" id="MotorMaya.walk"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.walk">[docs]</a>    <span class="k">def</span> <span class="nf">walk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Moves through the motor and returns a PickNode at a certain distance</span>
<span class="sd">        (steps) away from the current MotorMaya instance. If no PickNode exists</span>
<span class="sd">        at that given distance, the last known PickNode is returned</span>

<span class="sd">        Args:</span>
<span class="sd">            direction (str): The direction to walk in</span>
<span class="sd">            steps (int): The number of times to walk in a direction</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The node that is direction * steps away from the</span>
<span class="sd">                               given MotorMaya object. If there is no valid node</span>
<span class="sd">                               at this location, the last known node is used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowedDirections</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Something went wrong. GUI got an &quot;</span>
                               <span class="s2">&quot;invalid direction&quot;</span><span class="p">)</span>

        <span class="c1"># Parse the direction</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">members</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">walk</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">walk</span> <span class="o">=</span> <span class="n">temp</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">walk</span></div>
    <span class="c1"># end walk</span>

<div class="viewcode-block" id="MotorMaya.get_pick_node"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.get_pick_node">[docs]</a>    <span class="k">def</span> <span class="nf">get_pick_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the PickNode for the current MotorMaya instance and creates within</span>
<span class="sd">        the PickNodeGeneric instantiation if it didn&#39;t already exist</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The PickNode for the current MotorMaya instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span></div>
    <span class="c1"># end get_pick_node</span>

<div class="viewcode-block" id="MotorMaya.get_object_hierarchy"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.get_object_hierarchy">[docs]</a>    <span class="k">def</span> <span class="nf">get_object_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;_PickRunner_MASTER&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a node, the function will get every connected PickNodeGeneric</span>
<span class="sd">        object connected from Maya&#39;s outgoing connections. The default</span>
<span class="sd">        implementation of the current function is to return all nodes under</span>
<span class="sd">        PickRunner&#39;s master node but any node can be supplied</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the metadata node to retrieve it&#39;s outgoing</span>
<span class="sd">                        connections of</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of tuples: Each tuple contains the key/item pair of a</span>
<span class="sd">                            dictionary (originally cast from a defaultdict</span>
<span class="sd">                            object)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make dictionary for every node, with its connections as its item</span>
        <span class="n">finalDictH</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="n">appl</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span><span class="p">()</span>
        <span class="n">motor</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">nodetypes</span><span class="o">.</span><span class="n">KeyingGroup</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">outgoingConnections</span> <span class="o">=</span> <span class="n">appl</span><span class="o">.</span><span class="n">get_outgoing_connections</span><span class="p">(</span><span class="n">motor</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cnt</span> <span class="ow">in</span> <span class="n">outgoingConnections</span><span class="p">:</span>
            <span class="n">connection</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="n">appl</span><span class="o">.</span><span class="n">metadataNodeType</span><span class="p">,</span> <span class="n">cnt</span><span class="o">.</span><span class="n">nodeName</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">direction</span> <span class="ow">in</span> <span class="n">appl</span><span class="o">.</span><span class="n">allowedDirections</span><span class="p">:</span>
                <span class="n">connectedObj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">outputName</span> <span class="o">=</span> <span class="n">connectedObj</span><span class="o">.</span><span class="n">nodeName</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="n">outputName</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">raise</span>

                <span class="n">finalDictH</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">cnt</span><span class="o">.</span><span class="n">nodeName</span><span class="p">())]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">direction</span><span class="p">:</span> <span class="n">outputName</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">finalDictH</span> <span class="ow">is</span> <span class="p">{}:</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="c1"># Get the number of items, sort it and return</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">finalDictH</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">items</span><span class="p">[</span><span class="s2">&quot;items&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">items</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">])</span>
            <span class="n">finalDictH</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">items</span>
        <span class="n">finalDictH</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">finalDictH</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">finalDictH</span></div>
    <span class="c1"># get object_hierarchy</span>

<div class="viewcode-block" id="MotorMaya.get_unique_name"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.get_unique_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_unique_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">nodeName</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a unique name for the current node. Defaults to getting a node&#39;s</span>
<span class="sd">        UUID but it can also get the node&#39;s name, instead</span>
<span class="sd">        You can also just pass the input node thru and output a name, if needed</span>

<span class="sd">        Args:</span>
<span class="sd">            node (&lt;pymel.core.nodetype.PyNode&gt; or str): The name of the node to</span>
<span class="sd">                                                        get the UUID of</span>
<span class="sd">            nodeName (bool): When specified, the function returns the dag path</span>
<span class="sd">                             to the node, rather than the UUID (the default</span>
<span class="sd">                             implementation)</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The UUID of the passed object or its dag path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">nodeName</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="n">mel</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;$SOMETHING = `ls -uuid &quot;{}&quot;`;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">nodeName</span><span class="p">()))</span>
        <span class="n">UUID</span> <span class="o">=</span> <span class="n">mel</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;$temp=$SOMETHING&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">UUID</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">UUID</span></div>
    <span class="c1"># end get_unique_name</span>

<div class="viewcode-block" id="MotorMaya.get_master_node"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.get_master_node">[docs]</a>    <span class="k">def</span> <span class="nf">get_master_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the master node connection for a given PickNodeGeneric</span>

<span class="sd">        Args:</span>
<span class="sd">            node (&lt;PickNodeGeneric&gt;): The node to query</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The master node connected to the current node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">master</span></div>
    <span class="c1"># end get_master_node</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">members</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        An intermediary property which returns the current class&#39;s PickNode.</span>
<span class="sd">        The picknode is typically used to access connected directions, if not</span>
<span class="sd">        to simply be created if it hasn&#39;t been already</span>

<span class="sd">        Returns:</span>
<span class="sd">            &lt;PickNodeGeneric&gt;: The picknodw for the current Maya object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pickNode</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">)</span>

        <span class="c1"># force a connection between the picknode and master, if none exists</span>
        <span class="k">if</span> <span class="n">pickNode</span><span class="o">.</span><span class="n">master</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">pickNode</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">membership</span><span class="o">.</span><span class="n">MASTER_NODE_NAME</span> <span class="o">+</span> <span class="s2">&quot;.message&quot;</span>
        <span class="k">return</span> <span class="n">pickNode</span>
    <span class="c1"># end members</span>

    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Comparison constructor - checks if both MotorMaya instances are the</span>
<span class="sd">        same by comparing their given nodeNames</span>

<span class="sd">        Args:</span>
<span class="sd">            other (&lt;MotorMaya&gt;): Another MotorMaya or class of similar type</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: 0 Means that the two nodes are equal, -1 not equal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">nodeName</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">nodeName</span><span class="p">:</span>
            <span class="c1"># :NOTE: -1 is actually reserve for &lt; but because we&#39;re comparing</span>
            <span class="c1"># strings and not numbers, this &lt; and &gt; don&#39;t matter to us</span>
            <span class="c1">#</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="c1"># end __cmp__</span>

<div class="viewcode-block" id="MotorMaya.delete"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the Maya node metadata of the current class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_metadata</span><span class="p">():</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">PyNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_pick_node</span><span class="p">()</span><span class="o">.</span><span class="n">nodeName</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">pm</span><span class="o">.</span><span class="n">listAttr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">pm</span><span class="o">.</span><span class="n">connectionInfo</span><span class="p">(</span><span class="n">node</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">attr</span><span class="p">,</span> <span class="n">isSource</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
                    <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">node</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">attr</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

            <span class="n">connections</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">listConnections</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">connection</span> <span class="ow">in</span> <span class="n">connections</span><span class="p">:</span>
                <span class="n">connect</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">listConnections</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">pm</span><span class="o">.</span><span class="n">connectionInfo</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">dfs</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
                    <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>


            <span class="n">pm</span><span class="o">.</span><span class="n">disconnectAttr</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="n">pm</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">node</span><span class="p">)</span></div>
    <span class="c1"># end delete</span>

<div class="viewcode-block" id="MotorMaya.disconnect"><a class="viewcode-back" href="../../../pickrunner/pickrunnerdocumentation.html#pickrunner.controller.engine.MotorMaya.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowedNodeAttrs</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a given connection from the current instance&#39;s message and</span>
<span class="sd">        another instance&#39;s given attribute</span>

<span class="sd">        Args:</span>
<span class="sd">            allowedNodeAttrs (bool): If True, the function will not allow the</span>
<span class="sd">                                     disconnection of attributes that are not</span>
<span class="sd">                                     also listed in</span>
<span class="sd">                                     :ref:`app_AppMaya_nodeAttributesAll`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">PickNodeGeneric</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pickNodeInfo</span><span class="p">)</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">+</span> <span class="s2">&quot;.message&quot;</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">dest</span> <span class="o">+=</span> <span class="n">arg</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">ApplicationMaya</span>
        <span class="k">if</span> <span class="n">allowedNodeAttrs</span> <span class="ow">and</span> <span class="n">dest</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nodeAttributesAll</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Destination: {} not in allowed values, &quot;</span>
                             <span class="s2">&quot;{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nodeAttributesAll</span><span class="p">))</span>
            <span class="k">return</span>  <span class="c1"># do nothing</span>

        <span class="n">pm</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">pm</span><span class="o">.</span><span class="n">disconnectAttr</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span></div></div>
    <span class="c1"># end disconnect</span>
<span class="c1"># end MotorMaya</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">__doc__</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Colin Kennedy.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>