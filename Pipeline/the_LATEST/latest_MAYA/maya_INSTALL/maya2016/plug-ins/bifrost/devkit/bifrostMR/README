//****************************************************************************
// Copyright 2014 Autodesk, Inc. All rights reserved.
//
// Use of this software is subject to the terms of the Autodesk
// license agreement provided at the time of installation or download,
// or which otherwise accompanies this software in either electronic
// or hard copy form.
//****************************************************************************


Bifrost Mentalray shaders
===================================================

This directory contains the following files:

    bifrostChannelLookup.cpp            - World-space voxel channel lookup shaders.
    bifrostDensityVolume.cpp            - Aero volume shader: ray-marching to the intersection point.
    bifrostHaloedVisitor.h              - A simplified version of haloed visitor to support voxel filtering.
    bifrostHelpers.cpp                  - Helpers to process Bifrost data: bounding box, ray-isosurface intersection, etc.
    bifrostHelpers.h
    bifrostIf.cpp                       - Utility if-else shaders: return based on input condition.
    bifrostIllumFlat.cpp                - Simple flat lighting shader.
    bifrostIsosurfaceGeo.cpp            - Liquid geometry shader.
    bifrostIsosurfaceVolume.cpp         - Liquid volume shader: ray-isosurface intersection and evaluate surface material.
    bifrostMentalrayHelpers.h           - Helpers to wrap Mentalray C style functions for ease of use.
    bifrostMixVorticityVelocities.cpp   - Mixing velocity and vorticity: vorticity*vorticity_factor+||velocity||*velocity_factor
    bifrostObjectUserData.cpp           - Uniquely identify a Bifrost object for rendering.
    bifrostObjectUserData.h
    bifrostRemap.cpp                    - Utility remap shaders: input*intensity+offset
    bifrostSimpleScatter.cpp            - Simple schlick scattering shader.
    bifrostVolumeGeo.cpp                - Aero geometry shader.
    bifrostVoxelSamplerPool.cpp         - A per-thread pool of voxel samplers.
    bifrostVoxelSamplerPool.h

To compile the plug-in on Windows:
    1) Open bifrostMR.sln
    2) Change configuration to Release or ReleaseDebug
    3) Update ..\..\..\mentalrayForMayaXXXX\devkit\include to Mentalray include path in Properties -> C/C++ -> Additional Include Directories
    4) Update ..\..\..\mentalrayForMayaXXXX\devkit\lib\nt to Mentalray library path in Properties -> Linker -> Additional Library Directories
    5) Build

To compile the plug-in on Linux:
    1) Uncomment and update MENTALRAY_LOCATION in Makefile.inc
    2) make

To compile the plug-in on Mac:
    1) Open bifrostMR.xcodeproj
    2) Update $(MAYA_DIRECTORY)/mentalray/devkit/include to Mentalray include path in Properties -> Search Paths -> Header Search Paths
    3) Build

Mentalray is installed as a separate package so it's important to update the include and library path.
If not, the compiler can't find shader.h or geoshader.h and errors.

To install the shaders:
    1) Copy bifrostMR.dll or bifrostMR.so or bifrostMR.dylib to mentalray/shaders
    2) Copy bifrostMR.mi and bifrostphenMR.mi to mentalray/shaders/include

