$xz = norm([abs($P[0]),0,abs($P[2])]);
$a = asin($xz[0])/(PI*2);
$long = 0.75+$a;
$long = ($P[2]>0&&$P[0]<0) ? 0.75-$a : $long;
$long = ($P[2]<0&&$P[0]>0) ? 0.25-$a : $long;
$long = ($P[2]<0&&$P[0]<0) ? 0.25+$a : $long;

$y = norm($P)[1];
$lat = $P[1]>0 ? (asin($y)/PI+0.5) : 0.5-(asin(-$y)/PI) ;

map("",$long,$lat)#file map
