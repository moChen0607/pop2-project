// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
// Description:
//  Converts version 0.91 preferences to version 0.92 for beta7
//
{
	// Replaces static references to startup cameras in panel configurations
	// with a function call.
	//

	string $panelConfigs[] = `getPanel -allConfigs`;
	string $kCameraFlagStr = "-cam[a-z]*[ ][^ ^;]*";
	string $kFindPerspStr = "-cam `findStartUpCamera persp`";
	string $kFindTopStr = "-cam `findStartUpCamera top`";
	string $kFindSideStr = "-cam `findStartUpCamera side`";
	string $kFindFrontStr = "-cam `findStartUpCamera front`";
	string $buffStr, $buffStr2;;
	int $i, $nPanelConfig;


	$nPanelConfig = size($panelConfigs);
	for ($i = 0; $i < $nPanelConfig; $i++)
	{
		string $labels[] = `panelConfiguration -query -labelStrings $panelConfigs[$i]`;
		string $types[] = `panelConfiguration -query -typeStrings $panelConfigs[$i]`;
		string $editStrs[] = `panelConfiguration -query -editStrings $panelConfigs[$i]`;
		string $createStrs[] = `panelConfiguration -query -createStrings $panelConfigs[$i]`;
		int $j, $nTypes;
		$nTypes = size($types);
		for ($j = 0; $j < $nTypes; $j++)
		{
			string $config = $panelConfigs[$i];

			if ("modelPanel" == $types[$j]) {
				if ("Persp View" == $labels[$j]) {
					$buffStr = substitute ($kCameraFlagStr, $editStrs[$j], $kFindPerspStr);
					$buffStr2 = substitute ($kCameraFlagStr, $createStrs[$j], $kFindPerspStr);
					panelConfiguration -edit 
						-replaceEditString ($j+1) $buffStr
						-replaceCreateString ($j+1) $buffStr2 $config;
				} else if ("Top View" == $labels[$j]) {
					$buffStr = substitute ($kCameraFlagStr, $editStrs[$j], $kFindTopStr);
					$buffStr2 = substitute ($kCameraFlagStr, $createStrs[$j], $kFindTopStr);
					panelConfiguration -edit 
						-replaceEditString ($j+1) $buffStr
						-replaceCreateString ($j+1) $buffStr2 $config;
				} else if ("Side View" == $labels[$j]) {
					$buffStr = substitute ($kCameraFlagStr, $editStrs[$j], $kFindSideStr);
					$buffStr2 = substitute ($kCameraFlagStr, $createStrs[$j], $kFindSideStr);
					panelConfiguration -edit 
						-replaceEditString ($j+1) $buffStr
						-replaceCreateString ($j+1) $buffStr2 $config;
				} else if ("Front View" == $labels[$j]) {
					$buffStr = substitute ($kCameraFlagStr, $editStrs[$j], $kFindFrontStr);
					$buffStr2 = substitute ($kCameraFlagStr, $createStrs[$j], $kFindFrontStr);
					panelConfiguration -edit 
						-replaceEditString ($j+1) $buffStr
						-replaceCreateString ($j+1) $buffStr2 $config;
				}
			}
		}
	}
}

