// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
//
//  Creation Date:  Aug 15 1996
//
//  Description:
//      This file creates the window menu
//

global proc string tearOffPanel (string $panelLabel, string $panelType, int $isScripted) {

	string $wndName = "";
	string $cmdStr;
	string $whichPanel = `getPanel -withLabel $panelLabel`;

	// Before Maya 8.5, panel labels were stored with
	// hard-coded English names.  When opening pre-8.5
	// scenes with UI configuration into a localized Maya, the
	// "getPanel -withLabel" cmd above (using a localized value
	// for $panelLabel) returns NULL, since panels are named
	// according to the English values read in from the pre-8.5
	// file.  
	// 
	// A reasonable fall-back of looking for the EN-named panel
	// minimizes problems when opening pre-8.5 scenes
	// with UI configuration information -- but keeps those older
	// panel labels in English, until the scene is saved in 8.5.
	//
	if( $whichPanel == "" ) {
		string $enLabel = unlocalizedPanelLabel( $panelLabel );
		if( $enLabel != $panelLabel ) {
			$whichPanel = `getPanel -withLabel $enLabel`;
		}
	}

	if ("" != $whichPanel) {
		$wndName = $whichPanel + "Window";
		if (`panel -q -to $whichPanel`) {
			//
			// The window is already displayed so just show it
			//
			showWindow $wndName;
		} else {
			//
			// There is no window so tear off the panel to make one
			//
			if ($isScripted) {
				$cmdStr = ("scriptedPanel -e -to " + $whichPanel);
			} else {
				$cmdStr = ($panelType + " -e -to " + $whichPanel);
			}
			eval $cmdStr;
		}
		fillEmptyPanes;
	} 
	else 
	{
		if ($isScripted) 
		{
			catch (`scriptedPanel -l $panelLabel -type $panelType -to`);
		} 
		else 
		{
			$cmdStr = ($panelType + " -l \""+ $panelLabel +"\" -to;");
			eval $cmdStr;
		}
	}
	return $wndName;
}
