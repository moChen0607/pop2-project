// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
//
//  Creation Date:  1 April 1996
//
//
//  Description:
//      This implements the "Display" menu on the main menubar.
//

////////////////////////////////////////////////////
//
// Builds only the top level of the Display menu,
// in order to speed up startup time - note that
// the submenus of the display menu should also
// be dynamically built, as there is a large number
// of entries in the display menu that causes the
// dynamic loading to be fairly slow.
//
///////////////////////////////////////////////////

// The top level Display menu is now being built on startup.
// This is to correct problems with the subprocs that are in the file
// not being found when the items are dragged to the shelf and
// it is by request of a number of users who don't like having
// to wait for this heavily used menu.  -llm
//
{
	global string $gMainDisplayMenu;
	global string $gMainWindow;

	string $menu = `menu -p $gMainWindow -l (uiRes("m_DisplayMenu.kDisplay"))
		-tearOff true -aob 1 
		-postMenuCommandOnce true
		-familyImage "menuIconDisplay.png" $gMainDisplayMenu`;
		
	buildDisplayMenu $menu;

	// When these events are received, then call the appropriate update proc.
	//
	scriptJob -permanent -parent $gMainDisplayMenu 
		-event "gridDisplayChanged" "if (!`exists gridMenuUpdate`) {eval \"source buildDisplayMenu\";} gridMenuUpdate;";
	scriptJob -permanent -parent $gMainDisplayMenu  
		-event "axisAtOriginChanged" "if (!`exists originAxesMenuUpdate`) {eval \"source buildDisplayMenu\";} originAxesMenuUpdate;";
	scriptJob -permanent -parent $gMainDisplayMenu  
		-event "SelectionChanged" "if (!`exists polyNormalSizeMenuUpdate`) {eval \"source buildDisplayMenu\";} polyNormalSizeMenuUpdate;";
	scriptJob -permanent -parent $gMainDisplayMenu
			-event "metadataVisualStatusChanged" ("if (!`exists updateMetadataUI`) {eval \"source buildDisplayMenu\";} updateMetadataUI;");
	scriptJob -permanent -parent $gMainDisplayMenu
			-event "SceneOpened" ("if (!`exists resetMetadataUI`) {eval \"source buildDisplayMenu\";} resetMetadataUI;");
 }
