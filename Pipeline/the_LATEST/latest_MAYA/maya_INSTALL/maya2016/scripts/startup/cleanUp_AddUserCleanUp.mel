// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//-----------------------------------------------------------------------
//
//  Creation Date:  January 16, 2003
//
//  Procedure Name:
//      cleanUp_AddUserCleanUp
//
//  Description:
//
//		Adds a new cleanup operation to the Optimize Scene Size dialog
//		box.  If enabled, this operation will run when the user clicks
//		Optimize Scene.
//
//  Input Arguments: 
//
//		$name - a string that will be used to uniquely identify this
//				operation (should have no spaced in it)
//		$label - user-friendly label that will appear in the Optimize
//				 Scene Size dialog
//		$default - 1 if the optimization should be enabled by default
//		$cmd - MEL command string to execute when the optimization is
//			   to be run.
//
//	Return Value: None.
//
//	Related Functions:
//
//		For progress reporting and interruptability, user-defined cleanup
//		steps might want to make use of the following utility functions:
//
//		cleanUp_StartProgress() - called before an operation begins
//		cleanUp_SetProgress() - called as the operation is running, to 
//								update the progress bar.
//		cleanUp_EndProgress() - called to signal that the operation is 
//								finished.
//		cleanUp_CheckInterrupt() - called between cleanup operations to
//								   detect when a previous operation has
//								   been interrupted.
//		cleanUp_Summary() - called to report the results of cleanup 
//							operations.
//
//-----------------------------------------------------------------------

global proc cleanUp_AddUserCleanUp( string $name, 
									string $label, 
									int $default, 
									string $cmd )
{
	//	global variable that stores user-defined cleanup operation 
	//	information
	//
	global string $gUserSceneCleanUps[];

	//	see if this optimization is already registered
	//
	int $len = size($gUserSceneCleanUps)/4;
	int $i;
	int $foundIndex = $len;
	for( $i = 0; $i < $len; $i++ )
	{
		if( $gUserSceneCleanUps[4*$i] == $name )
		{
			$foundIndex = $i;
			break;
		}
	}

	//	store the relevant information for this optimization in
	//	the array
	//
	$gUserSceneCleanUps[4*$foundIndex] = $name;
	$gUserSceneCleanUps[4*$foundIndex+1] = $label;
	$gUserSceneCleanUps[4*$foundIndex+2] = $default;
	$gUserSceneCleanUps[4*$foundIndex+3] = $cmd;
	
}

