// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
//
//  Creation Date:  21 Nov 2001
//
//  Description:
//      This is a helper script to perform the "diskCache -append" command
//		using the corresponding option box values.
//
global proc doAppendHairCache( int $version, string $args[] ) 
{
	if(( $version < 1 ) || ( size( $args ) < 5 )) {
		error( (uiRes("m_doAppendHairCache.kIncorrectVersion")) );
		return;
	}

	float $startTime = 0.0;
	float $endTime = 0.0;

	int $timeMode = $args[0];
	switch( $timeMode ) {
		case 1:
			$startTime = `currentTime -q`;
			$endTime = `currentTime -q`;
			break;
		case 2:
			$startTime = `currentTime -q`;
			$endTime = `playbackOptions -q -max`;
			break;
		case 3:
			$startTime = `playbackOptions -q -min`;
			$endTime = `playbackOptions -q -max`;
			break;
		case 4:
		default:
			$startTime = $args[1];
			$endTime = $args[2];
			break;

	}

	string $overSample = "\"\" ";
	if( $args[3] == "1" ) {
		$overSample = "\"-overSample\" ";
	}

	string $cmd = "";
	if( $startTime > $endTime ) {
		error((uiRes("m_doAppendHairCache.kEndTimeError")));
	} else {
		$cmd = ( "hairPlaybackCaches_append " + 
				 $startTime + " " + 
				 $endTime + " " + 
				 $overSample + 
				 $args[4] );
	}

	evalEcho( $cmd );
}

source "hairPlaybackCaches.mel";
