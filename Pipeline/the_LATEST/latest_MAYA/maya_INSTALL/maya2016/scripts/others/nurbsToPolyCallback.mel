// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
//  Procedure Name:
//      nurbsToPolyCallback
//
//  Description:
//		Update the option values with the current state of the option box UI.
//
//  Input Arguments:
//      parent - Top level parent layout of the option box UI.  Required so
//               that UI object names can be successfully resolved.
//
//		doIt   - Whether the command should execute.
//
//  Return Value:
//      None.
//

global proc nurbsToPolyCallback(string $parent, int $doIt)
{
    setParent $parent;

	int $formatButton = `radioButtonGrp -q -sl format`;
	int $formatValue = 1;
	switch( $formatButton ) {
	  case 1:
		$formatValue = 2;
		break;
	  case 2:
		$formatValue = 0;
		break;
	}

	int $formatButton2 = `radioButtonGrp -q -sl format2`;
	switch( $formatButton2 ) {
	  case 1:
		$formatValue = 1;
		break;
	  case 2:
		$formatValue = 3;
		break;
	}

	nurbsToPolygonsPref -format $formatValue;
	nurbsToPolygonsPref -matchRenderTessellation (`checkBoxGrp -q -v1 matchRenderTessellationBox`);
	nurbsToPolygonsPref -merge (`checkBoxGrp -q -v1 mergeBox`);
	nurbsToPolygonsPref -mergeTolerance (`floatSliderGrp -q -value mergeTolerance`);
	nurbsToPolygonsPref -polyType (`radioButtonGrp -q -sl type` - 1);
	nurbsToPolygonsPref -polyCount (`intSliderGrp -q -v count`);

	if( $formatValue == 1 ) {		// Format is "Standard Fit"
		nurbsToPolygonsPref -chr (`floatSliderGrp -q -v ratioS`);
	} else {
		nurbsToPolygonsPref -chr (`floatSliderGrp -q -v ratioG`);
	}
	nurbsToPolygonsPref -ft (`floatSliderGrp -q -v fractional`);
	nurbsToPolygonsPref -mel (`floatSliderGrp -q -v minEdgeLength`);
	nurbsToPolygonsPref -d (`floatSliderGrp -q -v delta`);

	nurbsToPolygonsPref -uType (`optionMenuGrp -q -sl uType`);
	nurbsToPolygonsPref -uNumber (`intSliderGrp -q -v uNumber`);
	nurbsToPolygonsPref -vType (`optionMenuGrp -q -sl vType`);
	nurbsToPolygonsPref -vNumber (`intSliderGrp -q -v vNumber`);
	nurbsToPolygonsPref -useChordHeight (`checkBoxGrp -q -v1 useChordHeight`);
	nurbsToPolygonsPref -chordHeight (`floatSliderGrp -q -v chordHeight`);
	nurbsToPolygonsPref -useChordHeightRatio
		(`checkBoxGrp -q -v1 useChordHeightRatio`);
	nurbsToPolygonsPref -edgeSwap (`checkBoxGrp -q -v1 edgeSwap`);

	if ($doIt) {
		performnurbsToPoly 0;
		addToRecentCommandQueue "performnurbsToPoly 0" "Nurbs To Polygons";
	}
}

