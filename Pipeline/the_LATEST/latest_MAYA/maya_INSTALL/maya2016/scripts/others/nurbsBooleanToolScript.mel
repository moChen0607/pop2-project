// Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
// All rights reserved.
//
// The coded instructions, statements, computer programs, and/or related
// material (collectively the "Data") in these files contain unpublished
// information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
// which is protected by U.S. and Canadian federal copyright law and by
// international treaties.
//
// The Data is provided for use exclusively by You. You have the right to use,
// modify, and incorporate this Data into other products for purposes authorized 
// by the Autodesk software license agreement, without fee.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
// DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
// INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
// MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
// OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
// LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
// DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
// LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

//
//
// Creation Date:  14 January 1999
//
//
//  Procedure Name:
//      nurbsBoolean1ToolScript
//
//  Input Arguments:
//      what is going to happen when this script is called
//		$setToTool = 0 ==> do the command
//		$setToTool = 1 ==> show option box
//		$setToTool = 2 ==> return the command
//		$setToTool = 3 ==> show tool option box
//		$setToTool = 4 ==> enter the tool
//
//  Return Value:
//      None.
//

proc createNurbsBooleanContext( int $whichOne, string $tool )
{
	string $selectNURBSForFirst = (uiRes("m_nurbsBooleanToolScript.kSelectNURBSForFirst"));
	string $selectAdditionalFirstOrSecond = (uiRes("m_nurbsBooleanToolScript.kSelectAdditionalFirstOrSecond"));
	string $selectNURBSForSecond = (uiRes("m_nurbsBooleanToolScript.kSelectNURBSForSecond"));

	if( ! `licenseCheck -m "edit" -typ "model"` ) return;

	switch ($whichOne) {
	  case 0:
		if( ! `scriptCtx -exists $tool` ) {
		  scriptCtx
            -i1 "nurbsShellUnion.png"
			-bcn "nurbsBooleanUnion"
		
            -title (uiRes("m_nurbsBooleanToolScript.kUnionTool"))
			-toolCursorType  "edit"
            -totalSelectionSets 2
            -cumulativeLists true
            -expandSelectionList true
            -enableRootSelection true 
			-exitUponCompletion true
            -fcs ("performBoolean 0 0 " +
				  "$Selection1 \`currentCtx\`")
            -setNoSelectionPrompt $selectNURBSForFirst
            -setSelectionPrompt $selectAdditionalFirstOrSecond

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true

            -setNoSelectionPrompt $selectNURBSForSecond
            -setSelectionPrompt (uiRes("m_nurbsBooleanToolScript.kSelectAdditionalSecondUnion"))

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true
            $tool;
		}
		break;
	  case 1:
		if( ! `scriptCtx -exists $tool` ) {
		  scriptCtx
            -i1 "nurbsShellSubtract.png"
			-bcn "nurbsBooleanSubtract"

            -title (uiRes("m_nurbsBooleanToolScript.kDifferenceTool"))
			-toolCursorType  "edit"
            -totalSelectionSets 2
            -cumulativeLists true
            -expandSelectionList true
            -enableRootSelection true 
			-exitUponCompletion true
            -fcs ("performBoolean 0 1 " +
				  "$Selection1 \`currentCtx\`")

            -setNoSelectionPrompt $selectNURBSForFirst
            -setSelectionPrompt $selectAdditionalFirstOrSecond

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true

            -setNoSelectionPrompt $selectNURBSForSecond
            -setSelectionPrompt (uiRes("m_nurbsBooleanToolScript.kSelectAdditionalSecondDifference"))

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true
            $tool;
		}
		break;
	  case 2:
	  default:
		if( ! `scriptCtx -exists $tool` ) {
		  scriptCtx
            -i1 "nurbsShellIntersect.png"
			-bcn "nurbsBooleanIntersect"

            -title (uiRes("m_nurbsBooleanToolScript.kIntersectionTool"))
			-toolCursorType  "edit"
            -totalSelectionSets 2
            -cumulativeLists true
            -expandSelectionList true
            -enableRootSelection true 
			-exitUponCompletion true
            -fcs ("performBoolean 0 2 " +
				  "$Selection1 \`currentCtx\`")

            -setNoSelectionPrompt $selectNURBSForFirst
            -setSelectionPrompt $selectAdditionalFirstOrSecond

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true

            -setNoSelectionPrompt $selectNURBSForSecond
            -setSelectionPrompt (uiRes("m_nurbsBooleanToolScript.kSeectAdditionalSecondIntersect"))

            -setAutoToggleSelection true
            -setAutoComplete false
            -setSelectionCount 0
            -nurbsSurface true
            $tool;
		}
		break;
	}
}

global proc string nurbsBooleanToolScript( int $setToTool, int $whichOne )
//
//	Description :
//		$setToTool = 0 ==> do the command
//		$setToTool = 1 ==> show option box
//		$setToTool = 2 ==> return the command
//		$setToTool = 3 ==> show tool option box
//		$setToTool = 4 ==> enter the tool
{
	string $tool = "";
	if( $setToTool > 2 ) {
		switch( $whichOne ) {
		  case 0:
			$tool = "nurbsBooleanUnionContext";
			break;
		  case 1:
			$tool = "nurbsBooleanSubtractContext";
			break;
		  case 2:
		  default:
			$tool = "nurbsBooleanIntersectContext";
			break;
		}
		createNurbsBooleanContext( $whichOne, $tool );
	}

	string $result = "";
	switch ($setToTool) {
	  case 4:
		setToolTo $tool;
		break;
	  default:
		$result = eval( "performBoolean " + $setToTool + " " +
						$whichOne + " {\" \", \" \"} \"" + $tool + "\"" );
		break;
	}
	return $result;
}
