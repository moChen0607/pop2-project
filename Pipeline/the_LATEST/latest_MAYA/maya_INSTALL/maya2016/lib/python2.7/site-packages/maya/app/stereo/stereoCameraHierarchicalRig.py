import maya.cmds as cmds
from maya.app.stereo import stereoCameraDefaultRig

"""
This module defines a Stereo Camera rig.

    createRig() creates the rig itself
    registerThisRig() registers it into the system
"""

def createRig(basename='stereoCameraHier'):
  """
  Creates a new stereo rig. Uses a series of Maya commands to build
  a stereo rig.
  The optionnal argument basename defines the base name for each DAG
  object that will be created.
  """

  # Create the root of the rig
  # 
  root = cmds.camera( name=basename )[0]

  # use this name as basename for the other rigs. This may not be the
  # exact original basenaemif this object already exists in the scene. 
  basename = root.split('|')[-1]
  
  # create sub-rigs, using default setup
  #
  front = stereoCameraDefaultRig.createRig(basename=basename+'Front')
  mid   = stereoCameraDefaultRig.createRig(basename=basename+'Mid')
  back  = stereoCameraDefaultRig.createRig(basename=basename+'Back')

  # Reparent them under the main camera
  #
  cmds.parent(front[0], root)
  cmds.parent(mid[0], root)
  cmds.parent(back[0], root)
  
  # Move them to make them more visible
  #
  cmds.setAttr( front[0] + '.translateZ',  8)
  cmds.setAttr( mid[0]   + '.translateZ',  4)
  cmds.setAttr( back[0]  + '.translateZ', -4)
  
  # define Mid as the default Left, Right pair, return it.
  #
  return [root, mid[1], mid[2]]

def registerThisRig():
  """
  Registers the rig in Maya's database
  """
  cmds.stereoRigManager(add=['StereoCameraHier', 'Python',
                             'maya.app.stereo.stereoCameraHierarchicalRig.createRig'])
# Copyright (C) 1997-2014 Autodesk, Inc., and/or its licensors.
# All rights reserved.
#
# The coded instructions, statements, computer programs, and/or related
# material (collectively the "Data") in these files contain unpublished
# information proprietary to Autodesk, Inc. ("Autodesk") and/or its licensors,
# which is protected by U.S. and Canadian federal copyright law and by
# international treaties.
#
# The Data is provided for use exclusively by You. You have the right to use,
# modify, and incorporate this Data into other products for purposes authorized 
# by the Autodesk software license agreement, without fee.
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND. AUTODESK
# DOES NOT MAKE AND HEREBY DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTIES
# INCLUDING, BUT NOT LIMITED TO, THE WARRANTIES OF NON-INFRINGEMENT,
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR ARISING FROM A COURSE 
# OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT WILL AUTODESK AND/OR ITS
# LICENSORS BE LIABLE FOR ANY LOST REVENUES, DATA, OR PROFITS, OR SPECIAL,
# DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES, EVEN IF AUTODESK AND/OR ITS
# LICENSORS HAS BEEN ADVISED OF THE POSSIBILITY OR PROBABILITY OF SUCH DAMAGES.

